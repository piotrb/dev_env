#!/usr/bin/env ruby

def sh(cmd)
  puts "$ #{cmd}"
  system(cmd) || raise("command failed: #{$?.exitstatus}")
end

if ARGV.empty?
  name = $stdin.readline
else
  name = ARGV.join(' ')
end

name = name.downcase.gsub(/[^a-z0-9]/, ' ').gsub(/ +/, ' ').strip.gsub(' ', '-')

sh "git checkout -b #{name.inspect}"
sh "git config branch.#{name}.remote origin"
sh "git config branch.#{name}.merge refs/heads/#{name}"
